---
import { Sprite } from "astro-icon";

import Breadcrumbs from "./Breadcrumbs.astro";
import DrawerSide from "./DrawerSide.astro";
import Footer from "./Footer.astro";
import Header from "./Header.astro";
import ModalAccount from "./ModalAccount.astro";

let pathname: string = Astro.url.pathname;
if (pathname.at(-1) === "/") {
	pathname = pathname.slice(0, pathname.length - 1);
}
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<script is:inline>
			const theme =
				localStorage.getItem("theme") === null
					? "light"
					: localStorage.getItem("theme");
			document.documentElement.setAttribute("data-theme", theme);
		</script>
		<script>
			import { themeChange } from "theme-change";
			themeChange();
		</script>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#2a303c" />
		<title>Document</title>
	</head>
	<body>
		<Sprite.Provider>
			<div class="drawer drawer-end">
				<input id="my-drawer" type="checkbox" class="drawer-toggle rating" />
				<div
					class="drawer-content flex flex-col min-h-screen"
					style={{
						overflow: "overlay",
					}}
				>
					<Header />
					<Breadcrumbs />
					<main class="flex-1 pb-8">
						<slot />
					</main>
					<Footer />
				</div>
				<DrawerSide />
			</div>
		</Sprite.Provider>
	</body>
	<ModalAccount />
</html>
